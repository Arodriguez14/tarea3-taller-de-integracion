(this["webpackJsonptarea3-taller-de-integracion"]=this["webpackJsonptarea3-taller-de-integracion"]||[]).push([[0],{112:function(e,t,n){},144:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),s=n(22),r=n.n(s),o=(n(112),n(9)),a=n(50),j=n(32),u=Object(j.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),l=(n(56),n(2)),d=function(e){var t=e.nombre,n=Object(c.useState)(""),i=Object(o.a)(n,2),s=i[0],r=i[1],d=Object(c.useState)([]),b=Object(o.a)(d,2),O=b[0],h=b[1];Object(c.useEffect)((function(){return function(){var e=Object(j.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"});console.log("set UP"),e.on("CHAT",(function(e){O.push(e),r(e),h(O)}))}(),function(){u.disconnect()}}),[]);var f=Object(c.useRef)(null);Object(c.useEffect)((function(){f.current.scrollIntoView({behavior:"smooth"})}));return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"chat",children:[O.map((function(e,t){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Date(e.date),"-",e.name,":"]}),Object(l.jsx)("div",{children:e.message})]},t)})),Object(l.jsx)("div",{ref:f})]}),Object(l.jsx)("div",{className:"text",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u.emit("CHAT",{name:t,message:s,date:"09/05/2021"}),r(""),h([].concat(Object(a.a)(O),[s]))},children:[Object(l.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",value:s,onChange:function(e){return r(e.target.value)}}),Object(l.jsx)("button",{children:"Enviar"})]})})]})},b=(n(144),n(238)),O=n(241),h=n(232),f=n(239),p=n(233),x=n(234),g=n(235),m=n(240),v=n.p+"static/media/plane-icon.53368dcd.png",S=n(10),w=[0,0],C=!1,I=new S.Icon({iconUrl:v,iconSize:[20,20]}),E=function(){var e=Object(c.useState)({code:"",airline:"",origin:[],destination:[],plane:"",seats:0,passengers:[]}),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(!1),r=Object(o.a)(s,2),j=r[0],d=r[1],v=Object(c.useState)([]),S=Object(o.a)(v,2),E=S[0],k=S[1],F=Object(c.useState)([]),N=Object(o.a)(F,2),T=N[0],y=N[1],P=Object(c.useState)([]),D=Object(o.a)(P,2),H=D[0],z=D[1],L=Object(c.useState)([]),A=Object(o.a)(L,2),V=A[0],B=(A[1],function(){u.disconnect()}),G={map:{height:"100%",borderRadius:10},info:{display:j?"":"none"}};Object(c.useEffect)((function(){return u.on("POSITION",(function(e){z((function(t){return[].concat(Object(a.a)(t),[e])}));for(var t=0;t<E.length;t++)E[t].code===e.code&&(E[t].origin=e.position,k(E))})),function(){return B()}}),[]),u.emit("FLIGHTS"),Object(c.useEffect)((function(){return u.on("FLIGHTS",(function(e){!1===C&&e.forEach((function(e){T.push(e),y([T]),V.push([e.origin,e.destination]);var t={origin:e.origin,code:e.code};E.push(t),k(E),C=!0}))})),function(){return B()}}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{id:"mapa",children:Object(l.jsxs)(h.a,{center:w,zoom:0,minZoom:1,scrollWheelZoom:!1,style:G.map,children:[Object(l.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),E.map((function(e){return Object(l.jsx)(p.a,{position:e.origin,icon:I,children:Object(l.jsxs)(x.a,{code:e.code,children:[Object(l.jsx)("code",{positionCode:e.code,children:e.code}),Object(l.jsx)("a",{onClick:function(){return t=e.code,T[0].forEach((function(e){e.code==t&&i({code:e.code,airline:e.airline,origin:e.origin,destination:e.destination,plane:e.plane,seats:e.seats,passengers:e.passengers})})),void d(!0);var t},children:"Ver m\xe1s"})]})})})),";",V.map((function(e){return Object(l.jsx)(g.a,{positions:e})})),";",V.map((function(e){return Object(l.jsx)(m.a,{center:e[0]})})),";",V.map((function(e){return Object(l.jsx)(m.a,{center:e[1]})})),";",H.map((function(e){return Object(l.jsx)(m.a,{center:{lat:e.position[0],lng:e.position[1]},color:"red",radius:1})}))]})}),Object(l.jsxs)("div",{children:[Object(l.jsx)(b.a,{show:j,overflow:!0,backdrop:!0,onHide:function(){return d(!1)},children:Object(l.jsx)("button",{className:"boton",onClick:function(){return d(!1)},children:"Close Info"})}),Object(l.jsx)(O.a,{style:G.info,children:Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("h2",{children:"Info Vuelo"}),Object(l.jsxs)("p",{children:["Code: ",n.code]}),Object(l.jsxs)("p",{children:["Airline: ",n.airline]}),Object(l.jsxs)("p",{children:["Origin: ",n.origin[0],",",n.origin[1]]}),Object(l.jsxs)("p",{children:["Destination: ",n.destination[0],",",n.destination[1]]}),Object(l.jsxs)("p",{children:["Plane: ",n.plane]}),Object(l.jsxs)("p",{children:["Seats: ",n.seats]}),Object(l.jsx)("p",{children:"Passangers: "}),n.passengers.map((function(e,t){return Object(l.jsxs)("p",{children:["- ",e.name,": ",e.age," a\xf1os."]},t.toString())}))]})})]})]})};var k=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(!1),r=Object(o.a)(s,2),a=r[0],j=r[1];return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)("div",{children:Object(l.jsx)(E,{})}),Object(l.jsxs)("div",{className:"derecha",children:[!a&&Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n&&j(!0)},children:[Object(l.jsx)("label",{htmlFor:"",children:"Introduzca su nombre"}),Object(l.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)}}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{children:"Ir al chat"})]}),a&&Object(l.jsx)(d,{nombre:n})]})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),F()},56:function(e,t,n){}},[[229,1,2]]]);
//# sourceMappingURL=main.9a2358eb.chunk.js.map